<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="emp">

	<resultMap id="employeeMap" type="emp">
		<!-- id ëŠ” primary key... -->
		<id column="EMP_ID" property="empId" />
		<result column="EMP_NAME" property="empName" />
		<result column="EMP_NO" property="empNo" />
		<result column="EMAIL" property="email" />
		<result column="PHONE" property="phone" />
		<result column="DEPT_CODE" property="deptCode" />
		<result column="JOB_CODE" property="jobCode" />
		<result column="SAL_LEVEL" property="salLevel" />
		<result column="SALARY" property="salary" />
		<result column="BONUS" property="bonus" />
		<result column="MANAGER_ID" property="managerId" />
		<result column="HIRE_DATE" property="hireDate" />
		<result column="ENT_DATE" property="empDate" />
	</resultMap>
	
	<select id="selectEmpAll" resultMap="employeeMap">
		SELECT * FROM Employee
	</select>
	
	<select id="searchEmp" resultMap="employeeMap" parameterType="map">
		SELECT *
		FROM (
			SELECT e.*, DECODE(SUBSTR(EMP_NO, 8, 1), '1', 'M', '2', 'F') AS GENDER 
			FROM EMPLOYEE e 
		)
		WHERE
			 <if test="keyword != null and keyword != ''"> 
		        ${type} LIKE '%'||#{keyword}||'%'
			 </if>
			 <if test="gender != null and gender != ''">
			 	AND GENDER=#{gender}
			 </if>
			   
	</select>
</mapper>
